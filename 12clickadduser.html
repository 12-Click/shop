<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ingrese un Nuevo Usuario</title>
     <!-- Favicon -->
  <link rel="shortcut icon" href="images/Logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            flex-direction: column;
        }

        .container {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 1000px;
            width: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header img {
            max-height: 50px;
        }

        .response-card {
            background-color: #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .response-card h3 {
            font-size: 1.2rem;
            color: #495057;
        }

        .response-card p {
            font-size: 1rem;
            color: #6c757d;
        }

        button {
            background-color: #007bff;
            color: #ffffff;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        .form-row {
            margin-bottom: 1.5rem;
        }

        .form-label {
            font-weight: bold;
        }

        .progress-bar {
            height: 20px;
        }

        .popup-alert {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            z-index: 1050;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <img src="images/barlogo.png" alt="Logo"> <!-- Replace with your logo URL -->
            <br><br><h2 class="mb-0">Ingresa un Nuevo Miembro</h2>
            
        </div>

        <!-- Progress Bar -->
        <div class="progress mb-3" style="display: none;" id="progressContainer">
            <div class="progress-bar" id="progressBar" role="progressbar" style="width: 0%"></div>
        </div>
        <h3 style="text-align: center; color: #C59E01; font-weight: bold;">Paso #1</h3><br>


        <form id="userForm">
            <div class="row">
                <!-- Left Column -->
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" name="username" required>
                    </div>

                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="text" class="form-control" id="password" name="password" required> <!-- Password not masked -->
                    </div>

                    <div class="mb-3">
                        <label for="membership" class="form-label">Membership</label>
                        <select class="form-control" id="membership" name="membership" required>
                            <option value="">Select Membership</option>
                            <option value="Standard">Standard</option>
                            <option value="VIP Gold">VIP Gold</option>
                            <option value="VIP Premium">VIP Premium</option>
                        </select>
                    </div>
                    

                    <div class="mb-3">
                        <label for="role" class="form-label">Role</label>
                        <select class="form-control" id="role" name="role" required>
                            <option value="user" selected>User</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    

                    <br><br>
                    
                </div>

                <!-- Right Column -->
                <div class="col-md-6">
                    

                    <div class="mb-3">
                        <label for="ar_ads" class="form-label">AR Ads Limit</label>
                        <select class="form-control" id="ar_ads" name="ar_ads" required>
                            <option value="2">Standard (2)</option>
                            <option value="5">VIP Gold (5)</option>
                            <option value="10">VIP Premium (10)</option>
                            <!-- You can add more options depending on the range you want -->
                        </select>
                    </div>
                    

                    <div class="mb-3">
                        <label for="catalogs" class="form-label">Catalogs Limit</label>
                        <select class="form-control" id="catalogs" name="catalogs" required>
                            <option value="5">Standard (5)</option>
                            <option value="10">VIP Gold (10)</option>
                            <option value="20">VIP Premium (20)</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                    

                    <div class="mb-3">
                        <label for="ar_selfies" class="form-label">AR Selfies Limit</label>
                        <select class="form-control" id="ar_selfies" name="ar_selfies" required>
                            <option value="0">Standard (0)</option>
                            <option value="0">VIP Gold (0)</option>
                            <option value="5">VIP Premium (5)</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                    

                    <div class="mb-3">
                        <label for="webpages" class="form-label">Webpages Limit</label>
                        <select class="form-control" id="webpages" name="webpages" required>
                            <option value="1">Standard (1)</option>
                            <option value="1">VIP Gold (1)</option>
                            <option value="1">VIP Premium (1)</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                    

                </div>
                <h3 style="text-align: center; color: #C59E01; font-weight: bold;">Paso #2</h3><br>

                <div class="mb-3">
                    <label for="order_id" class="form-label">Order ID</label>
                    <input type="text" class="form-control" id="order_id" name="order_id" required>
                </div>

                <div class="mb-3">
                    <label for="order_status" class="form-label">Order Status</label>
                    <select class="form-control" id="order_status" name="order_status" required>
                        <option value="Orden Recibida">Orden Recibida</option>
                        <option value="En Proceso con Desarrollador">En Proceso con Desarrollador</option>
                        <option value="Orden Digital Completa">Orden Digital Completa</option>
                    </select>
                </div>

            </div><br><h3 style="text-align: center; color: #C59E01; font-weight: bold;">Paso #3</h3><br>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="usage_ar_ads" class="form-label">Used AR Ads</label>
                        <input type="number" class="form-control" id="usage_ar_ads" name="usage_ar_ads" required>
                    </div>

                    <div class="mb-3">
                        <label for="usage_catalogs" class="form-label">Used Catalogs</label>
                        <input type="number" class="form-control" id="usage_catalogs" name="usage_catalogs" required>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="usage_ar_selfies" class="form-label">Used AR Selfies</label>
                        <input type="number" class="form-control" id="usage_ar_selfies" name="usage_ar_selfies" required>
                    </div>

                    <div class="mb-3">
                        <label for="usage_webpages" class="form-label">Used Webpages</label>
                        <input type="number" class="form-control" id="usage_webpages" name="usage_webpages" required>
                    </div>
                </div>
            </div><br><br>

            <button type="button" class="btn btn-primary w-100" onclick="submitForm()">Add User</button>
            
        </form>
        

        <div id="responseContainer" class="response-card" style="display: none;">
            <h3>Response</h3>
            <div id="responseCards"></div>
        </div>
    </div>

    <div class="popup-alert" id="popupAlert">
        User created successfully!
    </div>

    

    <script>
        async function submitForm() {
            const progressContainer = document.getElementById("progressContainer");
            const progressBar = document.getElementById("progressBar");
            const popupAlert = document.getElementById("popupAlert");

            // Show progress bar
            progressContainer.style.display = "block";
            progressBar.style.width = "0%";

            // Increment progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                progressBar.style.width = `${progress}%`;
                if (progress >= 100) {
                    clearInterval(interval);
                }
            }, 300);

            const url = "https://j89c3i4kpe.execute-api.us-east-1.amazonaws.com/12ClickProduction/users"; // Replace with your API Gateway URL
            const formData = {
                username: document.getElementById("username").value,
                limits: {
                    ar_ads: document.getElementById("ar_ads").value,
                    ar_selfies: document.getElementById("ar_selfies").value,
                    catalogs: document.getElementById("catalogs").value,
                    webpages: document.getElementById("webpages").value
                },
                membership: document.getElementById("membership").value,
                orders: {
                    [document.getElementById("order_id").value]: {
                        status: document.getElementById("order_status").value
                    }
                },
                password: document.getElementById("password").value,
                role: document.getElementById("role").value,
                usage: {
                    ar_ads: document.getElementById("usage_ar_ads").value,
                    ar_selfies: document.getElementById("usage_ar_selfies").value,
                    catalogs: document.getElementById("usage_catalogs").value,
                    webpages: document.getElementById("usage_webpages").value
                }
            };

            try {
                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();

                // Hide progress bar
                progressContainer.style.display = "none";

                // Show success popup
                popupAlert.style.display = "block";
                setTimeout(() => {
                    popupAlert.style.display = "none";
                }, 3000); // Hide after 3 seconds

                // Reset the form
                document.getElementById("userForm").reset();

            } catch (error) {
                console.error("Error creating user:", error);
            }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    
</body>
</html>
